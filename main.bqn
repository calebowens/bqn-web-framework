query_params â† â€¢Import "bqn/query_params.bqn"
table â† â€¢Import "bqn/table.bqn"
router â† â€¢Import "bqn/router.bqn"
âŸ¨InternalErrorâŸ© â† â€¢Import "bqn/errors.bqn"

controller â† {
	Greet â‡ {
		name â† "name" table.Get query_params.BasicParse ğ•©.uri.query

		nameâ‰¢âŸ¨âŸ© ?
			âŸ¨
				200
				âŸ¨âŸ¨"Content-Type", "text/html"âŸ©âŸ©
				"Hello " âˆ¾ name
			âŸ© ;
			âŸ¨
				302
				âŸ¨âŸ¨"Location", "/"âŸ©âŸ©
				""
			âŸ©
	}

	home â‡ âŸ¨
		200
		âŸ¨âŸ¨"Content-Type", "text/html"âŸ©âŸ©
		"Visit /greet with query param name to be greeted"
	âŸ©

	Throws â‡ {ğ•Š
		âŸ¨"Something went wrong!", 20âŸ© ! 0
	}
}

controller.Home router._get_ "/"
controller.Greet router._get_ "/greet"
controller.Throws router._get_ "/throws"

{
	router.HandleRequestâŠ{InternalError â€¢CurrentError} ğ•©
}
